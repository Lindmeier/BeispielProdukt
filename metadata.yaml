kind: Produkt
id: f78e8f5d-6998-47dd-9962-8acc1ecda118
name: terraform-fakewebservices-vm
category: tbd
description: Produkt HighlyAvailableService - 2 VMs mit vorgeschaltetem Loadbalancer
owner: xgadlnd
capability: tbd
state: planned
type: Terraform
contains:
  - name: NAME_VM1
    vers: "1.0.0"
    repo_url: "app.terraform.io/team-automation/generator/random"
    vars:
      type: "VM"
  - name: NAME_VM2
    vers: "1.0.0"
    repo_url: "app.terraform.io/team-automation/generator/random"
    vars:
      type: "VM"
  - name: NAME_LB
    vers: "1.0.0"
    repo_url: "app.terraform.io/team-automation/generator/random"
    vars:
      type: "LB"
  - name: VM1
    vers: "1.0.0"
    repo_url: "app.terraform.io/team-automation/VM/fakewebservices"
    vars:
      vm_type: "{{inputs.vm_type}}"
      official_name: "{{NAME_VM1.official_name}}"
  - name: VM2
    vers: "1.0.0"
    repo_url: "app.terraform.io/team-automation/VM/fakewebservices"
    vars:
      vm_type: "webserver"
      official_name: "{{NAME_VM2.official_name}}"
  - name: LB
    vers: "1.0.0"
    repo_url: "app.terraform.io/team-automation/LB/fakewebservices"
    vars:
      vm_type: "webserver"
      servers: "{{tolist([module.VM1.vm_id, module.VM2.vm_id ])}}"
inputs:
  - type: "String"
    name: "vm_type"
outputs:
  - type: "String"
    name:  "lb_id"
    value: "{{LB.lb_id}}"



